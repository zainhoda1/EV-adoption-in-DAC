'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Removing duplicates
#design1<- design %>% distinct(respID, attID, .keep_all = TRUE)
# Check counts
table(design$issue)
#write_csv(design, here('data', 'choice_options.csv'))
View(design)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = distinct(attID))
to_remove <- info[info$distinct_points < 5, ]$respID
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = distinct(attID))
View(design)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- info[info$distinct_points < 5, ]$respID
to_remove
print(length(to_remove))
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- info[info$distinct_points < 5, ]$respID
to_remove
print(length(to_remove))
# Load libraries
library(tidyverse)
library(cbcTools)
library(readr)
library(here)
att <- seq(17)
options <-seq(5)
n_resp <- 100
result <- list()
atts <- data.frame(
attribute = c(
'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Removing duplicates
#design1<- design %>% distinct(respID, attID, .keep_all = TRUE)
# Check counts
table(design$issue)
#write_csv(design, here('data', 'choice_options.csv'))
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- info[info$distinct_points < 5, ]$respID
to_remove
print(length(to_remove))
View(design)
design2 <- design[design$respID %in% to_remove]
design2 <- design[design$respID %in% to_remove,]
info2<-  design2 %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove2 <- info[info$distinct_points < 5, ]$respID
to_remove2
to_remove2 <- info2[info2$distinct_points < 5, ]$respID
to_remove2
info2<-  design2 %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove2 <- info2[info2$distinct_points < 5, ]$respID
to_remove2
length(to_remove2)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- info[info$distinct_points < 5, ]$respID
to_remove
print(length(to_remove))
design2 <- design[design$respID %in% to_remove,]
info2<-  design2 %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove2 <- info2[info2$distinct_points < 5, ]$respID
to_remove2
length(to_remove2)
to_keep <- info[info$distinct_points == 5, ]$respID
to_keep
print(length(to_remove))
print(length(to_keep))
View(info)
to_keep
to_keep <- unique(info[info$distinct_points == 5, ]$respID)
to_keep
print(length(to_keep))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
print(length(to_keep))
print(length(to_remove))
print(length(to_remove))
design2 <- design[!(design$respID %in% to_remove,)]
design2 <- design[!(design$respID %in% to_remove)]
design2 <- design[!(design$respID %in% to_remove, )]
design2 <- design[!(design$respID %in% to_remove ),]
info2<-  design2 %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove2 <- info2[info2$distinct_points < 5, ]$respID
to_remove2
length(to_remove2)
to_remove2 <- info2[info2$distinct_points == 5, ]$respID
to_remove2
length(to_remove2)
length(unique(to_remove2))
View(design2)
View(design)
# Load libraries
library(tidyverse)
library(cbcTools)
library(readr)
library(here)
att <- seq(17)
options <-seq(5)
n_resp <- 10000
result <- list()
atts <- data.frame(
attribute = c(
'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Check counts
table(design$issue)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
print(length(to_remove))
design2 <- design[!(design$respID %in% to_remove ),]
info2<-  design2 %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove2 <- info2[info2$distinct_points == 5, ]$respID
to_remove2
length(unique(to_remove2))
# Load libraries
library(tidyverse)
library(cbcTools)
library(readr)
library(here)
att <- seq(17)
options <-seq(5)
n_resp <- 100
result <- list()
atts <- data.frame(
attribute = c(
'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Removing duplicates
#design1<- design %>% distinct(respID, attID, .keep_all = TRUE)
# Check counts
table(design$issue)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
print(length(to_remove))
design2 <- design[!(design$respID %in% to_remove ),]
#write_csv(design, here('data', 'choice_options.csv'))
# Load libraries
library(tidyverse)
library(cbcTools)
library(readr)
library(here)
att <- seq(17)
options <-seq(5)
n_resp <- 100
result <- list()
atts <- data.frame(
attribute = c(
'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Removing duplicates
#design1<- design %>% distinct(respID, attID, .keep_all = TRUE)
# Check counts
table(design$issue)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
print(length(to_remove))
design2 <- design[!(design$respID %in% to_remove ),]
#write_csv(design, here('data', 'choice_options.csv'))
# Load libraries
library(tidyverse)
library(cbcTools)
library(readr)
library(here)
att <- seq(17)
options <-seq(5)
n_resp <- 100
result <- list()
atts <- data.frame(
attribute = c(
'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Removing duplicates
#design1<- design %>% distinct(respID, attID, .keep_all = TRUE)
# Check counts
table(design$issue)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
print(length(to_remove))
design2 <- design[!(design$respID %in% to_remove ),]
#write_csv(design, here('data', 'choice_options.csv'))
# Load libraries
library(tidyverse)
library(cbcTools)
library(readr)
library(here)
att <- seq(17)
options <-seq(5)
n_resp <- 15000
result <- list()
atts <- data.frame(
attribute = c(
'Certified Pre-Owned (CPO) vehicle',
'Brand/Make',
'Number of previous owners',
'Vehicle history report available',
'Where was the vehicle previously used?',
'Vehicle fuel efficiency',
'Vehicle warranty',
'Return window',
'Pre-approved loan for the vehicle',
'Pre-purchase independent inspection',
'Test-driving the vehicle',
'Mileage on the vehicle',
'Purchase price',
'Vehicle seating capacity',
'Vehicle age',
'Interior/exterior condition',
'Cargo space'
)
)
atts$attID <- seq(nrow(atts))
n_q <- 6
n_atts <- 5
for (i in 1:n_resp) {
# Get random attribute IDs
set1 <- sample(x = att, size = nrow(atts), replace = FALSE)
set2 <- sample(x = att, size = n_q*n_atts - nrow(atts), replace = FALSE)
design <- data.frame(
respID = i,
qID = rep(seq(n_q), each = n_atts),
altID = rep(options, times = n_q),
attID = c(set1, set2)
)
result[[i]] <- design
}
design <- do.call(rbind, result)
# Check counts
table(design$attID)
# Join on attribute labels
design <- design %>%
left_join(atts, by = 'attID')
# Removing duplicates
#design1<- design %>% distinct(respID, attID, .keep_all = TRUE)
# Check counts
table(design$issue)
info<-  design %>%
group_by(respID, qID) %>%
summarize(distinct_points = n_distinct(attID))
to_remove <- unique(info[info$distinct_points< 5, ]$respID)
to_remove
print(length(to_remove))
design2 <- design[!(design$respID %in% to_remove ),]
#write_csv(design, here('data', 'choice_options.csv'))
write_csv(design2, here('data', 'choice_options.csv'))
View(design)
